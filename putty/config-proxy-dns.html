<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=US-ASCII">
<title>Name resolution when using a proxy</title>
<link rel="previous" href="config-proxy-exclude.html">
<link rel="ToC" href="index.html">
<link rel="next" href="config-proxy-auth.html">
<link rel="stylesheet" type="text/css" href="chm.css"></head>
<body>
<h1><a name="S4.16.3"></a>4.16.3 <a name="i0"></a><a name="i1"></a>Name resolution when using a proxy</h1>
<p>
If you are using a proxy to access a private network, it can make a difference whether <a name="i2"></a>DNS name resolution is performed by PuTTY itself (on the client machine) or performed by the proxy.
</p>
<p>
The &#8216;Do DNS name lookup at proxy end&#8217; configuration option allows you to control this. If you set it to &#8216;No&#8217;, PuTTY will always do its own DNS, and will always pass an IP address to the proxy. If you set it to &#8216;Yes&#8217;, PuTTY will always pass host names straight to the proxy without trying to look them up first.
</p>
<p>
If you set this option to &#8216;Auto&#8217; (the default), PuTTY will do something it considers appropriate for each type of proxy. Most types of proxy (HTTP, SOCK5, SSH, Telnet, and local) will have host names passed straight to them; SOCKS4 proxies will not.
</p>
<p>
Note that if you are doing DNS at the proxy, you should make sure that your proxy exclusion settings (see <a href="config-proxy-exclude.html#S4.16.2">section 4.16.2</a>) do not depend on knowing the IP address of a host. If the name is passed on to the proxy without PuTTY looking it up, it will never know the IP address and cannot check it against your list.
</p>
<p>
The original SOCKS 4 protocol does not support proxy-side DNS. There is a protocol extension (SOCKS 4A) which does support it, but not all SOCKS 4 servers provide this extension. If you enable proxy DNS and your SOCKS 4 server cannot deal with it, this might be why.
</p>
<p>
If you want to avoid PuTTY making <em>any</em> DNS query related to your destination host name (for example, because your local DNS resolver is very slow to return a negative response in that situation), then as well as setting this control to &#8216;Yes&#8217;, you may also need to turn off GSSAPI authentication and GSSAPI key exchange in SSH (see <a href="config-ssh-auth-gssapi.html#S4.22">section 4.22</a> and <a href="config-ssh-gssapi-kex.html#S4.18.1.1">section 4.18.1.1</a> respectively). This is because GSSAPI setup also involves a DNS query for the destination host name, and that query is performed by the separate GSSAPI library, so PuTTY can't override or reconfigure it.
</p>

</body>
</html>
