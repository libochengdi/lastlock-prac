<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=US-ASCII">
<title>Manually configuring host keys</title>
<link rel="previous" href="config-ssh-prefer-known-hostkeys.html">
<link rel="ToC" href="index.html">
<link rel="next" href="config-ssh-encryption.html">
<link rel="stylesheet" type="text/css" href="chm.css"></head>
<body>
<h1><a name="S4.19.3"></a>4.19.3 <a name="i0"></a>Manually configuring host keys</h1>
<p>
In some situations, if PuTTY's automated host key management is not doing what you need, you might need to manually configure PuTTY to accept a specific host key, or one of a specific set of host keys.
</p>
<p>
One reason why you might want to do this is because the host name PuTTY is connecting to is using round-robin DNS to return one of multiple actual servers, and they all have different host keys. In that situation, you might need to configure PuTTY to accept any of a list of host keys for the possible servers, while still rejecting any key not in that list.
</p>
<p>
Another reason is if PuTTY's automated host key management is completely unavailable, e.g. because PuTTY (or Plink or PSFTP, etc) is running in a Windows environment without access to the Registry. In that situation, you will probably want to use the <code>-hostkey</code> command-line option to configure the expected host key(s); see <a href="using-cmdline-hostkey.html#S3.11.3.21">section 3.11.3.21</a>.
</p>
<p>
For situations where PuTTY's automated host key management simply picks the wrong host name to store a key under, you may want to consider setting a &#8216;logical host name&#8217; instead; see <a href="config-loghost.html#S4.14.5">section 4.14.5</a>.
</p>
<p>
To configure manual host keys via the GUI, enter some text describing the host key into the edit box in the &#8216;Manually configure host keys for this connection&#8217; container, and press the &#8216;Add&#8217; button. The text will appear in the &#8216;Host keys or fingerprints to accept&#8217; list box. You can remove keys again with the &#8216;Remove&#8217; button.
</p>
<p>
The text describing a host key can be in one of the following formats:
</p>
<ul><li>
An <a name="i1"></a>SHA-256-based host key fingerprint of the form displayed in PuTTY's Event Log and host key dialog boxes, i.e. &#8216;<code>SHA256:</code>&#8217; followed by 43 case-sensitive characters.
</li>
<li>
An <a name="i2"></a>MD5-based host key fingerprint, i.e. sixteen 2-digit hex numbers separated by colons, optionally preceded by the prefix &#8216;<code>MD5:</code>&#8217;. (The case of the characters does not matter.)
</li>
<li>
A base64-encoded blob describing an SSH-2 public key in OpenSSH's one-line public key format. How you acquire a public key in this format is server-dependent; on an OpenSSH server it can typically be found in a location like <code>/etc/ssh/ssh_host_rsa_key.pub</code>.
</li>
</ul>
<p>
If this box contains at least one host key or fingerprint when PuTTY makes an SSH connection, then PuTTY's automated host key management is completely bypassed: the connection will be permitted if and only if the host key presented by the server is one of the keys listed in this box, and the <a name="i3"></a>host key store in the Registry will be neither read <em>nor written</em>, unless you explicitly do so.
</p>
<p>
If the box is empty (as it usually is), then PuTTY's automated host key management will work as normal.
</p>

</body>
</html>
