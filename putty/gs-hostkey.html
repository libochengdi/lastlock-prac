<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=US-ASCII">
<title>Verifying the host key (SSH only)</title>
<link rel="previous" href="gs-insecure.html">
<link rel="ToC" href="index.html">
<link rel="next" href="gs-login.html">
<link rel="stylesheet" type="text/css" href="chm.css"></head>
<body>
<h1><a name="S2.2"></a>2.2 <a name="i0"></a>Verifying the host key (SSH only)</h1>
<p>
If you are not using the <a name="i1"></a>SSH protocol, you can skip this section.
</p>
<p>
If you are using SSH to connect to a server for the first time, you will probably see a message looking something like this:
</p>
<pre><code>The host key is not cached for this server:
 ssh.example.com (port 22)
You have no guarantee that the server is the computer you think it is.
The server's ssh-ed25519 key fingerprint is:
 ssh-ed25519 255 SHA256:TddlQk20DVs4LRcAsIfDN9pInKpY06D+h4kSHwWAj4w
If you trust this host, press "Accept" to add the key to PuTTY's
cache and carry on connecting.
If you want to carry on connecting just once, without adding the key
to the cache, press "Connect Once".
If you do not trust this host, press "Cancel" to abandon the connection.
</code></pre>
<p>
This is a feature of the SSH protocol. It is designed to protect you against a network attack known as <a name="i2"></a><em>spoofing</em>: secretly redirecting your connection to a different computer, so that you send your password to the wrong machine. Using this technique, an attacker would be able to learn the password that guards your login account, and could then log in as if they were you and use the account for their own purposes.
</p>
<p>
To prevent this attack, each server has a unique identifying code, called a <em>host key</em>. These keys are created in a way that prevents one server from forging another server's key. So if you connect to a server and it sends you a different host key from the one you were expecting, PuTTY can warn you that the server may have been switched and that a spoofing attack might be in progress.
</p>
<p>
PuTTY <a name="i3"></a>records the host key for each server you connect to, in the Windows <a name="i4"></a>Registry. Every time you connect to a server, it checks that the host key presented by the server is the same host key as it was the last time you connected. If it is not, you will see a warning, and you will have the chance to abandon your connection before you type any private information (such as a password) into it. (See <a href="errors-hostkey-wrong.html#S10.2">section 10.2</a> for what that looks like.)
</p>
<p>
However, when you connect to a server you have not connected to before, PuTTY has no way of telling whether the host key is the right one or not. So it gives the warning shown above, and asks you whether you want to <a name="i5"></a>trust this host key or not.
</p>
<p>
Whether or not to trust the host key is your choice. If you are connecting within a company network, you might feel that all the network users are on the same side and spoofing attacks are unlikely, so you might choose to trust the key without checking it. If you are connecting across a hostile network (such as the Internet), you should check with your system administrator, perhaps by telephone or in person. (When verifying the fingerprint, be careful with letters and numbers that can be confused with each other: <code>0</code>/<code>O</code>, <code>1</code>/<code>I</code>/<code>l</code>, and so on.)
</p>
<p>
Many servers have more than one host key. If the system administrator sends you more than one <a name="i6"></a>fingerprint, you should make sure the one PuTTY shows you is on the list, but it doesn't matter which one it is.
</p>
<p>
If you don't have any fingerprints that look like the example (<a name="i7"></a><code>SHA256:</code> followed by a long string of characters), but instead have pairs of characters separated by colons like <code>a4:db:96:a7:...</code>, try pressing the &#8216;More info...&#8217; button and see if you have a fingerprint matching the &#8216;<a name="i8"></a>MD5 fingerprint&#8217; there. This is an older and less secure way to summarise the same underlying host key; it's possible for an attacker to create their own host key with the same fingerprint; so you should avoid relying on this fingerprint format unless you have no choice. The &#8216;More info...&#8217; dialog box also shows the full host public key, in case that is easier to compare than a fingerprint.
</p>
<p>
See <a href="config-ssh-hostkey.html#S4.19">section 4.19</a> for advanced options for managing host keys.
</p>

</body>
</html>
